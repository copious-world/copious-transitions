<div id="catcher-app" class="applink" >
    <p style="text-align:center;color:firebrick;font-size:120%;">Record New Songs</p>
    <blockquote id = "wv-recorder-header" style="text-align:center;padding-bottom:4px;">
        <button id="load-song-catcher" style="width:50%" onclick="do_fetch_recorder()" >Load Song Catcher</button>
        <!-- <br>
        <button id="install-song-catcher" style="width:50%" >Install Song Catcher</button> -->
    </blockquote>
    <blockquote id="recorder-scratchpad"  style="text-align:justify;padding: 8%;padding-top:4px;">
        Use the Copious Song Catcher to record your new song ideas.
        Songs will be stored in a distributed database permanently linked to your identity.
    </blockquote>
</div>
<script>
async function do_fetch_recorder() {
    if ( not_https_switch() ) {
        return;
    }
    let formJson = await fetchEndPoint('uploaders/static/recorder')
    if ( formJson ) {
        let formPlacement = document.querySelector('#recorder-scratchpad');
        if ( formPlacement ) {
            formPlacement.innerHTML = decodeURIComponent(formJson.html)
            addscript(decodeURIComponent(formJson.script),formPlacement)
            let loaderBtn = document.getElementById('load-song-catcher')
            loaderBtn.disabled = true
            loaderBtn.style.display = "none"
            let header = document.getElementById("wv-recorder-header")
            if ( header ) {
                header.innerHTML = "Record Songs"
            }
        }
    }
}

async function ensure_dialog_elements() {
    let test_dialog = document.getElementById("for_testing_dialogs")  // thought to be in the template... if not this does nothing
    if ( test_dialog ) {
        if ( typeof favDialog.showModal !== "function" ) {
            let element_supportJson =  await fetchEndPoint('uploaders/static/dialogs')
            if ( element_supportJson ) {
                let css_support = decodeURIComponent(formJson.html)
                document.appendChild(css_support)
                addscript(decodeURIComponent(element_supportJson.script),document)
            }
        }
    }
}

ensure_dialog_elements()
</script>